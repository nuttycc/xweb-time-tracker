# Boundary Tests 边界测试

## 模块职责
本目录包含应用的边界测试用例。这些测试专注于验证系统在各种极限条件、边界值和异常输入场景下的稳定性和正确性，是确保系统健壮性的重要组成部分。

## 测试原则与特征
-   **核心特征**:
    *   **极限值测试**: 针对输入的最大值、最小值、零值、空值等进行测试。
    *   **临界条件**: 测试数据或状态转换的临界点。
    *   **异常与无效输入**: 测试系统对无效格式、恶意构造或非预期输入的处理能力。
    *   **资源限制**: 模拟内存、存储空间、网络带宽等资源受限的情况。
    *   **并发与竞态**: 测试高并发访问或可能引发竞态条件的操作。
-   **主要测试范围**:
    *   数据验证逻辑的边界。
    *   资源使用（如内存、存储）的限制和处理。
    *   并发操作的正确性和稳定性。
    *   错误处理机制在边界条件下的行为。
    *   系统容量和可伸缩性的初步评估。

## 目录结构 (示例)
```
boundary/
├── README.md                     // 本文档
├── database/                     // 数据库相关边界测试
│   └── large-data.boundary.test.ts // 例如：大量数据操作测试
├── input-validation/             // 输入验证的边界测试
│   └── malicious-input.boundary.test.ts // 例如：恶意输入测试
├── resource-limits/              // 资源限制模拟测试
└── concurrency/                  // 并发场景测试
// ... 其他边界测试分类
```
*具体的测试用例位于各 `*.boundary.test.ts` 文件中。*

## 运行边界测试
```bash
# (假设已有npm script) 运行所有边界测试
npm run test:boundary

# (示例) 运行特定目录下的边界测试
npm run test:boundary -- tests/boundary/database/
```

## 边界测试类型概述
-   **数据边界测试**: 验证系统对数据输入（如数字、字符串、日期）的最小/最大有效值、临界值、无效值以及特殊字符的处理。
-   **容量边界测试**: 测试系统处理大量数据（如大量记录、大文件上传）或高频操作的能力和表现。
-   **并发边界测试**: 模拟多个用户或进程同时访问和操作共享资源，检查是否存在竞态条件、死锁或数据不一致问题。
-   **内存与资源边界测试**: 评估系统在内存使用接近上限、磁盘空间不足等资源受限情况下的行为和恢复能力。
-   **错误处理边界测试**: 验证错误处理机制是否能在各种异常和边界条件下被正确触发，并优雅地处理错误。
-   **安全边界测试**: 针对潜在的安全漏洞（如SQL注入、XSS、不当的权限控制）设计测试用例，尝试突破安全防线。

## 边界值分析方法
-   **等价类划分**: 将输入数据划分为有效的和无效的等价类，并从每个类的边界选取测试用例。
-   **边界值选择**: 重点测试刚好等于、略大于、略小于有效范围边界的值。
-   **错误猜测**: 基于经验和直觉预测可能出错的边界情况。

## 压力测试考量
-   **系统极限测试**: 逐步增加负载（如请求数、数据量），观察系统性能拐点和可能出现的故障点。
-   **资源耗尽测试**: 模拟特定资源（如内存、连接数）被耗尽的场景，测试系统的响应和恢复策略。

## 最佳实践
-   **全面覆盖**: 努力识别并覆盖所有关键模块和功能的潜在边界条件。
-   **场景化思考**: 将边界测试与实际或潜在的极端用户场景结合起来。
-   **渐进式测试**: 从正常值开始，逐步向边界值和异常值扩展测试范围。
-   **关注错误恢复**: 不仅验证系统在边界条件下是否失败，还要验证其是否能从中优雅恢复或给出明确错误提示。
-   **系统化数据准备**: 使用工具或脚本生成系统的边界测试数据。
-   **验证错误处理**: 确保错误被正确捕获、记录，并且系统在出错后仍能保持一致和可用的状态。

## 与其他测试的关系
-   **补充单元测试**: 单元测试关注正常逻辑，边界测试则专注于这些逻辑单元的边缘情况。
-   **补充集成测试**: 在集成测试验证模块间正常交互的基础上，边界测试进一步探索这些交互在极限条件下的表现。
-   **性能测试的输入**: 边界测试的结果（如发现的性能瓶颈）可以为性能测试提供重要的测试场景和关注点。
-   **安全测试的交叉**: 某些边界测试（如恶意输入测试）与安全测试有重叠。
