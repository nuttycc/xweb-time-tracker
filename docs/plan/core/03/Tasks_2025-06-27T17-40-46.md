[ ] NAME:Current Task List DESCRIPTION:Root task for conversation __NEW_AGENT__
-[ ] NAME:时间跟踪功能实施 DESCRIPTION:按照4阶段计划实施完整的时间跟踪功能，包括浏览器事件监听、状态管理、事件生成、队列处理和启动恢复
--[x] NAME:阶段1: 浏览器事件监听与核心状态管理 DESCRIPTION:建立浏览器事件监听器和实现核心状态管理器，实现单一焦点原则的实时状态机
---[x] NAME:创建配置常量文件 DESCRIPTION:创建src/config/constants.ts，集中管理所有CSPEC常量，包括时间跟踪阈值、URL过滤规则、checkpoint参数等
---[x] NAME:定义核心类型接口 DESCRIPTION:创建src/core/tracker/types/index.ts，定义TabState、InteractionMessage、DomainEvent、FocusContext等核心接口，使用zod v4验证
---[x] NAME:实现FocusStateManager DESCRIPTION:创建src/core/tracker/state/FocusStateManager.ts，实现单一焦点原则的状态管理器，维护Map<tabId, TabState>结构
---[x] NAME:实现交互检测消息系统 DESCRIPTION:创建src/core/tracker/messaging/InteractionDetector.ts，实现content script与background script之间的类型安全消息传递
---[x] NAME:编写阶段1单元测试 DESCRIPTION:为FocusStateManager、InteractionDetector等组件编写单元测试，验证单一焦点原则和消息传递
--[x] NAME:阶段2: 核心事件生成逻辑 DESCRIPTION:实现URL处理与过滤、Open Time事件生成和Active Time事件与情景感知超时
---[x] NAME:扩展URL处理器 DESCRIPTION:创建src/core/tracker/url/URLProcessor.ts，扩展现有url-normalizer功能，支持CSPEC的主机名过滤和查询参数过滤
---[x] NAME:实现EventGenerator DESCRIPTION:创建src/core/tracker/events/EventGenerator.ts，实现事件生成引擎，生成open_time_*、active_time_*和checkpoint事件
---[x] NAME:编写阶段2单元测试 DESCRIPTION:为URLProcessor、EventGenerator等组件编写单元测试，验证URL处理和事件生成逻辑
--[x] NAME:阶段3: 长期会话与可靠性保障 DESCRIPTION:实现Checkpoint调度与生成、事件批处理与队列、优雅关闭时的数据持久化
---[x] NAME:实现EventQueue DESCRIPTION:创建src/core/tracker/queue/EventQueue.ts，实现FIFO事件队列和批处理机制，集成DatabaseService
---[x] NAME:实现CheckpointScheduler DESCRIPTION:创建src/core/tracker/scheduler/CheckpointScheduler.ts，使用chrome.alarms API实现周期性checkpoint调度
---[x] NAME:编写阶段3单元测试 DESCRIPTION:为EventQueue、CheckpointScheduler等组件编写单元测试，验证队列处理和调度机制
--[x] NAME:阶段4: 启动恢复与集成 DESCRIPTION:实现启动恢复逻辑和集成数据库与错误处理，完成模块的最终集成
---[x] NAME:实现StartupRecovery DESCRIPTION:创建src/core/tracker/recovery/StartupRecovery.ts，实现两阶段启动恢复系统，处理孤儿会话和状态初始化
---[x] NAME:创建主跟踪模块导出 DESCRIPTION:创建src/core/tracker/index.ts，提供清洁的TimeTracker API，编排所有组件
---[x] NAME:集成background script DESCRIPTION:修改src/entrypoints/background/index.ts，集成TimeTracker并设置所有浏览器事件监听器
---[x] NAME:集成content script DESCRIPTION:修改src/entrypoints/content.ts，添加用户交互检测和消息传递功能
---[x] NAME:编写阶段4单元测试 DESCRIPTION:为StartupRecovery等组件编写单元测试，验证启动恢复逻辑
---[x] NAME:TypeScript类型安全修复 DESCRIPTION:修复所有TypeScript类型错误，实现完全类型安全的测试架构，移除any/unknown类型转换
---[x] NAME:编写集成测试 DESCRIPTION:创建tests/integration/tracker/time-tracking-flow.test.ts，验证完整的时间跟踪流程