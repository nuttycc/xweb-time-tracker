# 开发规范和规则

- TypeScript规则：1. 禁止使用any类型，用具体类型或泛型替代；2. 枚举值使用时必须导入枚举类型而非字符串；3. Dexie钩子函数参数需要明确类型注解；4. 错误处理函数必须包含空值检查避免undefined访问
- TypeScript类型声明文件导入规则：.d.ts文件应通过tsconfig.json的include配置自动包含，禁止在代码中显式import导入，避免模块解析错误
- IndexedDB存储的时间戳必须是UTC时间戳，所有时间转换和ISO字符串输出都必须基于UTC时区，显示给用户时才进行本地时区转换
- 严格流程控制经验：每完成一个任务阶段必须通过寸止工具汇报并等待确认，禁止擅自进入下一步；运行测试之前必须明确通过寸只申请，未经同意不得擅自行动；测试验证必须保证通过所有相关测试套件，不能只有部分测试通过就标记完成；发现问题时必须立即暂停并使用寸止报告，不要擅自行动；验证器迁移中遇到测试失败时，需要深入调查根本原因而不是简单修改测试
-libraries: 1. 当需要确认任何 Zod v4 API 或概念的用法时，必须执行双重验证流程：首先使用 context7 工具进行查询，随后立即使用 deepwiki 工具针对同一主题进行二次查询。只有在对比并确认了两个信息源的结果后，才能制定并执行下一步的计划。
