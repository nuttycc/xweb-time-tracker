# Models 数据模型层

## 目录职责
Models层定义应用中所有的数据结构、实体模型、值对象和事件模型，为整个应用提供统一的数据类型定义。

## 功能边界
- ✅ **包含内容**：数据结构定义、类型接口、数据模型、领域事件
- ❌ **不包含内容**：业务逻辑、数据操作、API调用、UI组件

## 子目录说明

### entities/ - 实体模型
定义应用中的核心实体，如时间记录、用户配置等具有唯一标识的业务对象。

### value-objects/ - 值对象
定义不可变的值对象，如时间跨度、URL、保留策略等没有唯一标识但有业务含义的对象。

### events/ - 事件模型
定义应用中的所有事件类型，包括追踪事件、同步事件、生命周期事件等。

### schemas/ - 数据模式
定义数据库表结构、API接口模式、配置文件模式等结构化数据的定义。

## 设计原则

### 1. 类型安全
充分利用TypeScript的类型系统，提供严格的类型定义和检查。

### 2. 不可变性
值对象应该是不可变的，实体的状态变更应该通过明确的方法进行。

### 3. 领域驱动
模型设计应该反映业务领域的概念和规则，而不是技术实现细节。

### 4. 接口隔离
不同模块使用的数据模型应该通过接口隔离，避免不必要的耦合。

## 模型分类

### 实体 (Entities)
具有唯一标识的业务对象：
- TimeRecord - 时间记录实体
- UserConfig - 用户配置实体
- Session - 会话实体

### 值对象 (Value Objects)
不可变的值类型：
- TimeSpan - 时间跨度
- URL - URL值对象
- RetentionPolicy - 保留策略

### 事件 (Events)
领域事件和系统事件：
- TrackingEvents - 追踪相关事件
- SyncEvents - 同步相关事件
- LifecycleEvents - 生命周期事件

### 模式 (Schemas)
数据结构定义：
- DatabaseSchema - 数据库表结构
- APISchema - API接口定义
- ConfigSchema - 配置文件结构

## 依赖关系
- **依赖**：shared/types/（基础类型定义）
- **被依赖**：core/（业务逻辑层）、services/（技术服务层）

## 命名约定
- **实体**：使用名词，首字母大写，如 `TimeRecord`
- **值对象**：使用名词，首字母大写，如 `TimeSpan`
- **事件**：使用动词+名词，如 `SessionStarted`
- **接口**：使用 `I` 前缀，如 `ITimeRecord`
- **类型**：使用 `Type` 后缀，如 `EventType`
